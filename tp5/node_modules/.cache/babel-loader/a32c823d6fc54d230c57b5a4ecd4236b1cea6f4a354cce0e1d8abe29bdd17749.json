{"ast":null,"code":"import _regeneratorRuntime from \"/workspaces/Mini_Projects_Js/tp5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/workspaces/Mini_Projects_Js/tp5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { addPost } from '../composables/addPost';\nexport default {\n  name: 'CreatePostView',\n  setup: function setup() {\n    var title = ref('');\n    var body = ref('');\n    var tags = ref('');\n    var error = ref('');\n    var success = ref(false);\n    var router = useRouter();\n    var submitPost = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var post;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              error.value = ''; // Réinitialiser l'erreur\n              success.value = false; // Réinitialiser le message de succès\n\n              // Validation côté client\n              if (!(!title.value || !body.value || !tags.value)) {\n                _context.next = 5;\n                break;\n              }\n              error.value = 'Please fill in all fields.';\n              return _context.abrupt(\"return\");\n            case 5:\n              _context.prev = 5;\n              post = {\n                title: title.value,\n                body: body.value,\n                tags: tags.value.split(',').map(function (tag) {\n                  return tag.trim();\n                })\n              };\n              _context.next = 9;\n              return addPost(post);\n            case 9:\n              // Ajouter le post via l'API\n\n              // Réinitialiser le formulaire après la soumission\n              title.value = '';\n              body.value = '';\n              tags.value = '';\n\n              // Afficher un message de succès\n              success.value = true;\n\n              // Rediriger vers la liste des posts après 2 secondes\n              setTimeout(function () {\n                router.push('/');\n              }, 2000);\n              _context.next = 20;\n              break;\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](5);\n              console.error('Error submitting post:', _context.t0);\n              error.value = 'Failed to submit post. Please try again.';\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[5, 16]]);\n      }));\n      return function submitPost() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    return {\n      title: title,\n      body: body,\n      tags: tags,\n      error: error,\n      success: success,\n      submitPost: submitPost\n    };\n  }\n};","map":{"version":3,"names":["ref","useRouter","addPost","name","setup","title","body","tags","error","success","router","submitPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","post","wrap","_callee$","_context","prev","next","value","abrupt","split","map","tag","trim","setTimeout","push","t0","console","stop","apply","arguments"],"sources":["/workspaces/Mini_Projects_Js/tp5/src/views/CreatePostView.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>Create a New Post</h1>\n    <form @submit.prevent=\"submitPost\">\n      <input v-model=\"title\" placeholder=\"Title\" required /><br>\n      <textarea v-model=\"body\" placeholder=\"Body\" required></textarea><br>\n      <input v-model=\"tags\" placeholder=\"Tags (comma separated)\" required /><br>\n      <button type=\"submit\">Submit</button>\n    </form>\n    <p v-if=\"error\" class=\"error\">{{ error }}</p>\n    <p v-if=\"success\" class=\"success\">Post submitted successfully!</p>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { addPost } from '../composables/addPost';\n\nexport default {\n  name: 'CreatePostView',\n  setup() {\n    const title = ref('');\n    const body = ref('');\n    const tags = ref('');\n    const error = ref('');\n    const success = ref(false);\n    const router = useRouter();\n\n    const submitPost = async () => {\n      error.value = ''; // Réinitialiser l'erreur\n      success.value = false; // Réinitialiser le message de succès\n\n      // Validation côté client\n      if (!title.value || !body.value || !tags.value) {\n        error.value = 'Please fill in all fields.';\n        return;\n      }\n\n      try {\n        const post = {\n          title: title.value,\n          body: body.value,\n          tags: tags.value.split(',').map(tag => tag.trim())\n        };\n\n        await addPost(post); // Ajouter le post via l'API\n\n        // Réinitialiser le formulaire après la soumission\n        title.value = '';\n        body.value = '';\n        tags.value = '';\n\n        // Afficher un message de succès\n        success.value = true;\n\n        // Rediriger vers la liste des posts après 2 secondes\n        setTimeout(() => {\n          router.push('/');\n        }, 2000);\n      } catch (err) {\n        console.error('Error submitting post:', err);\n        error.value = 'Failed to submit post. Please try again.';\n      }\n    };\n\n    return { title, body, tags, error, success, submitPost };\n  }\n};\n</script>\n\n<style scoped>\n.error {\n  color: red;\n}\n\n.success {\n  color: green;\n}\n</style>"],"mappings":";;;;;;;;;AAeA,SAASA,GAAE,QAAS,KAAK;AACzB,SAASC,SAAQ,QAAS,YAAY;AACtC,SAASC,OAAM,QAAS,wBAAwB;AAEhD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,KAAI,GAAIL,GAAG,CAAC,EAAE,CAAC;IACrB,IAAMM,IAAG,GAAIN,GAAG,CAAC,EAAE,CAAC;IACpB,IAAMO,IAAG,GAAIP,GAAG,CAAC,EAAE,CAAC;IACpB,IAAMQ,KAAI,GAAIR,GAAG,CAAC,EAAE,CAAC;IACrB,IAAMS,OAAM,GAAIT,GAAG,CAAC,KAAK,CAAC;IAC1B,IAAMU,MAAK,GAAIT,SAAS,CAAC,CAAC;IAE1B,IAAMU,UAAS;MAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAI,SAAAC,QAAA;QAAA,IAAAC,IAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACjBd,KAAK,CAACe,KAAI,GAAI,EAAE,EAAE;cAClBd,OAAO,CAACc,KAAI,GAAI,KAAK,EAAE;;cAEvB;cAAA,MACI,CAAClB,KAAK,CAACkB,KAAI,IAAK,CAACjB,IAAI,CAACiB,KAAI,IAAK,CAAChB,IAAI,CAACgB,KAAK;gBAAAH,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAC5Cd,KAAK,CAACe,KAAI,GAAI,4BAA4B;cAAA,OAAAH,QAAA,CAAAI,MAAA;YAAA;cAAAJ,QAAA,CAAAC,IAAA;cAKpCJ,IAAG,GAAI;gBACXZ,KAAK,EAAEA,KAAK,CAACkB,KAAK;gBAClBjB,IAAI,EAAEA,IAAI,CAACiB,KAAK;gBAChBhB,IAAI,EAAEA,IAAI,CAACgB,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,UAAAC,GAAE;kBAAA,OAAKA,GAAG,CAACC,IAAI,CAAC,CAAC;gBAAA;cACnD,CAAC;cAAAR,QAAA,CAAAE,IAAA;cAAA,OAEKpB,OAAO,CAACe,IAAI,CAAC;YAAA;cAAE;;cAErB;cACAZ,KAAK,CAACkB,KAAI,GAAI,EAAE;cAChBjB,IAAI,CAACiB,KAAI,GAAI,EAAE;cACfhB,IAAI,CAACgB,KAAI,GAAI,EAAE;;cAEf;cACAd,OAAO,CAACc,KAAI,GAAI,IAAI;;cAEpB;cACAM,UAAU,CAAC,YAAM;gBACfnB,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;cAClB,CAAC,EAAE,IAAI,CAAC;cAAAV,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;cAERY,OAAO,CAACxB,KAAK,CAAC,wBAAwB,EAAAY,QAAA,CAAAW,EAAK,CAAC;cAC5CvB,KAAK,CAACe,KAAI,GAAI,0CAA0C;YAAA;YAAA;cAAA,OAAAH,QAAA,CAAAa,IAAA;UAAA;QAAA,GAAAjB,OAAA;MAAA,CAE3D;MAAA,gBAnCKL,UAASA,CAAA;QAAA,OAAAC,IAAA,CAAAsB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAmCd;IAED,OAAO;MAAE9B,KAAK,EAALA,KAAK;MAAEC,IAAI,EAAJA,IAAI;MAAEC,IAAI,EAAJA,IAAI;MAAEC,KAAK,EAALA,KAAK;MAAEC,OAAO,EAAPA,OAAO;MAAEE,UAAS,EAATA;IAAW,CAAC;EAC1D;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}